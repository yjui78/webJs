
<!DOCTYPE HTML>
<html>
<head>
    <title>倒计时自动关闭/跳转页面</title>
    <meta charset="utf-8" />

</head>
<body>
<span>5秒钟后自动关闭窗口</span><br>
<a href="javascript:stop()">留在本页</a>
<script>
    window.onload =function(){
        timer =  setTimeout(calc,1000)
    }
    var timer =null;
    function calc(){
        var span =document.querySelector('span');
        var n = parseInt(span.innerHTML)-1;
        span.innerHTML = n+span.innerHTML.slice(1);
        if(n>0){
            timer = setTimeout(calc,1000)
        }else {
            window.close();//关闭当前窗口
        }
    }
    function stop(){
        clearTimeout(timer);
        timer =null;
        console.log(timer)
    }
</script>
</body>
</html>
