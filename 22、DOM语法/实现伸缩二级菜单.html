<!DOCTYPE HTML>
<html>
<head>
<title>1. 实现伸缩二级菜单</title>
<meta charset="utf-8" />

<style> li{list-style:none;}li span{padding-left: 20px;cursor: pointer;}.open{background: url("img/minus.png") no-repeat center left;}
.closed{background: url("img/add.png") no-repeat center left;}.show{display: block;}.hide{display: none;}</style>
</head>
<body>
	<ul class="tree">
		<li>
			<span class="open" onclick="toggle(this)">考勤管理</span>
			<ul class="show">
				<li>日常考勤</li>
				<li>请假申请</li>
				<li>加班/出差</li>
			</ul>
		</li>
		<li><span class="closed" onclick="toggle(this)">信息中心</span>
			<ul class="hide">
				<li>通知公告</li>
				<li>公司新闻</li>
				<li>规章制度</li>
			</ul>
		</li>
		<li><span class="closed" onclick="toggle(this)">协同办公</span>
			<ul class="hide">
				<li>公文流转</li>
				<li>文件中心</li>
				<li>内部邮件</li>
				<li>即时通信</li>
				<li>短信提醒</li>
			</ul>
		</li>
	</ul>
	<script>
	//所有HTML元素对象，都是HTMLElement类型的对象， 所有querySelectorAll用$
HTMLElement.prototype.$=function(selector){
    return this.querySelectorAll(selector);
}
//只能替换document.querySelectorAll()为$;
window.$=function(selector){
    return document.querySelectorAll(selector);
}
function toggle(span){
    var ul = span.parentNode.$('ul')[0];
    //当前打开时关
    if(span.className=='open'){
        span.className='closed';
        span.parentNode.$('ul')[0].className='hide';
    }else{
        //打开当前，先关闭所有其它打开的，有打开的就closed,hide,
        var openspan = $('.tree .open')[0];
        if(openspan){
            openspan.className='closed';
            $('ul.show')[0].className='hide';
        }
        span.className='open';
        ul.className='show';
    }
}</script>
</body>
</html>
